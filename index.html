<body>
  <!-- ‚úÖ Loading splash screen -->
  <div id="loading" style="
    font-family: sans-serif;
    padding: 1.2rem;
    text-align: center;
  ">
      üîß Loading Python environment‚Ä¶ please wait‚Ä¶
  </div>

  <!-- The Panel app will replace/overwrite this -->
  <div id="app"></div>

  <!-- Your existing JS loader below -->
  <script>
    async function boot() {
      try {
        const pyodide = await loadPyodide();
        document.getElementById("loading").innerText = "Downloading packages‚Ä¶";

        await pyodide.loadPackage("micropip");
        const micropip = pyodide.pyimport("micropip");
        await micropip.install([
          "https://cdn.holoviz.org/panel/wheels/bokeh-3.8.1-py3-none-any.whl",
          "https://cdn.holoviz.org/panel/wheels/panel-1.8.3-py3-none-any.whl"
        ]);

        // fetch and run your Python code (main.py)
        const code = await (await fetch("main.py")).text();
        await pyodide.runPythonAsync(code);

        // ‚úÖ hide loading once Python has rendered the app
        document.getElementById("loading").style.display = "none";

      } catch (err) {
        document.getElementById("loading").innerText =
          "‚ùå Failed to load app (see console).";
        console.error(err);
      }
    }

    boot();
  </script>
</body>
